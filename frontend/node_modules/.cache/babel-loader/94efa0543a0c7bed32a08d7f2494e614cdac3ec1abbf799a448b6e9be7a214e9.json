{"ast":null,"code":"var _jsxFileName = \"D:\\\\healthcare\\\\frontend\\\\src\\\\pages\\\\PatientDashboard.js\",\n  _s = $RefreshSig$();\n// Utility to decode JWT token\nfunction parseJwt(token) {\n  if (!token) return {};\n  try {\n    const base64Url = token.split('.')[1];\n    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n    const jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\n      return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n    }).join(''));\n    return JSON.parse(jsonPayload);\n  } catch {\n    return {};\n  }\n}\nimport React, { useState } from 'react';\nimport { predictFibromyalgia } from '../api/fibromyalgia';\nimport { generateReport } from '../api/report';\nimport axios from 'axios';\nimport './PatientDashboard.css';\nimport './PatientDashboardChatbot.css';\nimport { sendChatbotMessage } from '../api/chatbot';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PatientDashboard() {\n  _s();\n  const [form, setForm] = useState({\n    age: '',\n    sex: '',\n    ses: '',\n    csi: '',\n    sps: '',\n    sat: ''\n  });\n  const [result, setResult] = useState(null);\n  const [probability, setProbability] = useState(null);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [report, setReport] = useState(null);\n  const [reportLoading, setReportLoading] = useState(false);\n  // Chatbot state\n  const [chatOpen, setChatOpen] = useState(false);\n  const [chatInput, setChatInput] = useState('');\n  const [chatMessages, setChatMessages] = useState([{\n    sender: 'assistant',\n    text: 'Hi! I am your Fibromyalgia Assistant. Ask me about your prediction or anything related.'\n  }]);\n  const [chatLoading, setChatLoading] = useState(false);\n  const handleChange = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n    setResult(null);\n    setProbability(null);\n    setLoading(true);\n    setReport(null);\n    try {\n      // Convert fields to numbers\n      const inputData = {\n        age: parseFloat(form.age),\n        sex: parseInt(form.sex),\n        ses: parseFloat(form.ses),\n        csi: parseFloat(form.csi),\n        sps: parseFloat(form.sps),\n        sat: parseFloat(form.sat)\n      };\n      const token = localStorage.getItem('token');\n      const res = await predictFibromyalgia(inputData, token);\n      setResult(res.data.result);\n      setProbability(res.data.probability);\n      // Save inputData for report\n      setForm(prev => ({\n        ...prev,\n        ...inputData\n      }));\n      // Debug: log inputData before report generation\n      console.log('Report inputData:', inputData);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || 'Prediction failed.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Chatbot handlers\n  const handleChatOpen = () => setChatOpen(true);\n  const handleChatClose = () => setChatOpen(false);\n  const handleChatInput = e => setChatInput(e.target.value);\n  const handleChatSubmit = async e => {\n    e.preventDefault();\n    if (!chatInput.trim()) return;\n    setChatMessages(msgs => [...msgs, {\n      sender: 'user',\n      text: chatInput\n    }]);\n    setChatLoading(true);\n    try {\n      const res = await sendChatbotMessage(chatInput, result, probability);\n      setChatMessages(msgs => [...msgs, {\n        sender: 'assistant',\n        text: res.data.response\n      }]);\n    } catch {\n      setChatMessages(msgs => [...msgs, {\n        sender: 'assistant',\n        text: 'Sorry, there was a problem contacting the assistant.'\n      }]);\n    } finally {\n      setChatLoading(false);\n      setChatInput('');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"patient-dashboard-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"patient-dashboard-title\",\n      children: \"Patient Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"patient-dashboard-form\",\n      onSubmit: handleSubmit,\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Age\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"age\",\n          value: form.age,\n          onChange: handleChange,\n          required: true,\n          min: \"0\",\n          max: \"120\",\n          placeholder: \"Enter your age\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Sex (0=Female, 1=Male)\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"sex\",\n          value: form.sex,\n          onChange: handleChange,\n          required: true,\n          min: \"0\",\n          max: \"1\",\n          placeholder: \"0 for Female, 1 for Male\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Socioeconomic Status (SES)\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"ses\",\n          value: form.ses,\n          onChange: handleChange,\n          required: true,\n          step: \"any\",\n          placeholder: \"SES score\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"CSI Total Score\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"csi\",\n          value: form.csi,\n          onChange: handleChange,\n          required: true,\n          step: \"any\",\n          placeholder: \"Central Sensitization Inventory\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"SPS Total Score\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"sps\",\n          value: form.sps,\n          onChange: handleChange,\n          required: true,\n          step: \"any\",\n          placeholder: \"Sensory Perception Scale\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"SAT Total Score\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"sat\",\n          value: form.sat,\n          onChange: handleChange,\n          required: true,\n          step: \"any\",\n          placeholder: \"Sleep Assessment Tool\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        children: loading ? 'Predicting...' : 'Predict Fibromyalgia Risk'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"patient-dashboard-error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }, this), result && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"patient-dashboard-result\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"risk\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: result.icon,\n          style: {\n            fontSize: '1.5em',\n            verticalAlign: 'middle',\n            marginRight: '0.5em'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this), result.label]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"probability\",\n        children: [\"Probability: \", probability, \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"patient-dashboard-report-btn\",\n        style: {\n          marginTop: '1.2em',\n          padding: '0.7em 1.2em',\n          fontSize: '1.05rem',\n          borderRadius: '7px',\n          background: '#4f8cff',\n          color: '#fff',\n          border: 'none',\n          fontWeight: 600,\n          cursor: 'pointer',\n          boxShadow: '0 2px 8px rgba(44,62,80,0.08)'\n        },\n        disabled: reportLoading,\n        onClick: async () => {\n          setReportLoading(true);\n          setReport(null);\n          try {\n            const token = localStorage.getItem('token');\n            let full_name = window.localStorage.getItem('full_name') || '';\n            let email = window.localStorage.getItem('email') || '';\n            if (!full_name || !email) {\n              const payload = parseJwt(token);\n              if (!full_name && payload.full_name) full_name = payload.full_name;\n              if (!email && payload.sub) email = payload.sub;\n            }\n            // Debug: log extracted values\n            console.log('Extracted full_name:', full_name, 'Extracted email:', email);\n            if (!full_name) full_name = '-';\n            const inputData = {\n              age: parseFloat(form.age),\n              sex: parseInt(form.sex),\n              ses: parseFloat(form.ses),\n              csi: parseFloat(form.csi),\n              sps: parseFloat(form.sps),\n              sat: parseFloat(form.sat),\n              full_name,\n              email\n            };\n            const res = await generateReport(inputData, result, probability, token);\n            setReport(res.data);\n          } catch {\n            setReport({\n              error: 'Failed to generate report.'\n            });\n          } finally {\n            setReportLoading(false);\n          }\n        },\n        children: reportLoading ? 'Generating Report...' : 'Generate Report'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }, this), report && !report.error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"patient-dashboard-report\",\n      style: {\n        marginTop: '2em',\n        background: '#f8fafc',\n        borderRadius: '12px',\n        boxShadow: '0 2px 8px rgba(44,62,80,0.06)',\n        padding: '1.5em 1.2em'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          color: '#2d3a4b',\n          fontWeight: 700,\n          marginBottom: '1em'\n        },\n        children: report.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        style: {\n          listStyle: 'none',\n          padding: 0\n        },\n        children: Object.entries(report.fields).map(([key, value]) => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            marginBottom: '0.7em',\n            fontSize: '1.08rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [key, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 84\n          }, this), \" \", value]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '1.2em',\n          color: '#3a4a5d',\n          fontSize: '1.05rem'\n        },\n        children: report.summary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"patient-dashboard-report-btn\",\n        style: {\n          marginTop: '1.5em',\n          padding: '0.7em 1.2em',\n          fontSize: '1.05rem',\n          borderRadius: '7px',\n          background: '#38b6ff',\n          color: '#fff',\n          border: 'none',\n          fontWeight: 600,\n          cursor: 'pointer',\n          boxShadow: '0 2px 8px rgba(44,62,80,0.08)'\n        },\n        onClick: async () => {\n          try {\n            const token = localStorage.getItem('token');\n            let full_name = window.localStorage.getItem('full_name') || '';\n            let email = window.localStorage.getItem('email') || '';\n            if (!full_name || !email) {\n              const payload = parseJwt(token);\n              if (!full_name && payload.full_name) full_name = payload.full_name;\n              if (!email && payload.sub) email = payload.sub;\n            }\n            const inputData = {\n              age: parseFloat(form.age),\n              sex: parseInt(form.sex),\n              ses: parseFloat(form.ses),\n              csi: parseFloat(form.csi),\n              sps: parseFloat(form.sps),\n              sat: parseFloat(form.sat),\n              result,\n              probability,\n              full_name,\n              email\n            };\n            // Debug: log inputData before PDF download\n            console.log('PDF inputData:', inputData);\n            const res = await axios.post((process.env.REACT_APP_BACKEND_URL || 'http://localhost:8000') + '/download_report', inputData, {\n              headers: {\n                'Content-Type': 'application/json',\n                ...(token && {\n                  Authorization: `Bearer ${token}`\n                })\n              },\n              responseType: 'blob'\n            });\n            const url = window.URL.createObjectURL(new Blob([res.data], {\n              type: 'application/pdf'\n            }));\n            const link = document.createElement('a');\n            link.href = url;\n            link.setAttribute('download', 'Fibromyalgia_Report.pdf');\n            document.body.appendChild(link);\n            link.click();\n            link.parentNode.removeChild(link);\n          } catch {\n            alert('Failed to download PDF report.');\n          }\n        },\n        children: \"Download PDF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }, this), report && report.error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"patient-dashboard-error\",\n      children: report.error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chatbot-fab\",\n      title: \"Chat with Fibromyalgia Assistant\",\n      onClick: handleChatOpen,\n      style: {\n        display: chatOpen ? 'none' : 'flex'\n      },\n      children: \"\\uD83D\\uDCAC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `chatbot-sidebar${chatOpen ? '' : ' chatbot-closed'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatbot-header\",\n        children: [\"Fibromyalgia Assistant\", /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chatbot-close\",\n          title: \"Close\",\n          onClick: handleChatClose,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatbot-messages\",\n        id: \"chatbot-messages\",\n        children: [chatMessages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: msg.sender === 'user' ? 'chatbot-user' : 'chatbot-assistant',\n          children: msg.text\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }, this)), chatLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chatbot-assistant\",\n          children: \"...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 27\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"chatbot-form\",\n        onSubmit: handleChatSubmit,\n        autoComplete: \"off\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: chatInput,\n          onChange: handleChatInput,\n          placeholder: \"Ask about your result...\",\n          maxLength: 200,\n          disabled: chatLoading,\n          className: \"chatbot-input\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: chatLoading || !chatInput.trim(),\n          children: \"Send\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chatbot-disclaimer\",\n        children: \"This information is for educational purposes only and does not replace professional medical advice.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n}\n_s(PatientDashboard, \"m/SN7V72AM500KjgIU5n6gnNYv0=\");\n_c = PatientDashboard;\nexport default PatientDashboard;\nvar _c;\n$RefreshReg$(_c, \"PatientDashboard\");","map":{"version":3,"names":["parseJwt","token","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","React","useState","predictFibromyalgia","generateReport","axios","sendChatbotMessage","jsxDEV","_jsxDEV","PatientDashboard","_s","form","setForm","age","sex","ses","csi","sps","sat","result","setResult","probability","setProbability","error","setError","loading","setLoading","report","setReport","reportLoading","setReportLoading","chatOpen","setChatOpen","chatInput","setChatInput","chatMessages","setChatMessages","sender","text","chatLoading","setChatLoading","handleChange","e","target","name","value","handleSubmit","preventDefault","inputData","parseFloat","parseInt","localStorage","getItem","res","data","prev","console","log","err","_err$response","_err$response$data","response","detail","handleChatOpen","handleChatClose","handleChatInput","handleChatSubmit","trim","msgs","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","autoComplete","type","onChange","required","min","max","placeholder","step","disabled","icon","style","fontSize","verticalAlign","marginRight","label","marginTop","padding","borderRadius","background","color","border","fontWeight","cursor","boxShadow","onClick","full_name","window","email","payload","sub","marginBottom","title","listStyle","Object","entries","fields","key","summary","post","process","env","REACT_APP_BACKEND_URL","headers","Authorization","responseType","url","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","parentNode","removeChild","alert","display","id","msg","idx","maxLength","_c","$RefreshReg$"],"sources":["D:/healthcare/frontend/src/pages/PatientDashboard.js"],"sourcesContent":["// Utility to decode JWT token\r\nfunction parseJwt (token) {\r\n  if (!token) return {};\r\n  try {\r\n    const base64Url = token.split('.')[1];\r\n    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\r\n    const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {\r\n      return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\r\n    }).join(''));\r\n    return JSON.parse(jsonPayload);\r\n  } catch {\r\n    return {};\r\n  }\r\n}\r\n\r\n\r\nimport React, { useState } from 'react';\r\nimport { predictFibromyalgia } from '../api/fibromyalgia';\r\nimport { generateReport } from '../api/report';\r\nimport axios from 'axios';\r\nimport './PatientDashboard.css';\r\nimport './PatientDashboardChatbot.css';\r\nimport { sendChatbotMessage } from '../api/chatbot';\r\n\r\nfunction PatientDashboard() {\r\n  const [form, setForm] = useState({\r\n    age: '',\r\n    sex: '',\r\n    ses: '',\r\n    csi: '',\r\n    sps: '',\r\n    sat: ''\r\n  });\r\n  const [result, setResult] = useState(null);\r\n  const [probability, setProbability] = useState(null);\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [report, setReport] = useState(null);\r\n  const [reportLoading, setReportLoading] = useState(false);\r\n  // Chatbot state\r\n  const [chatOpen, setChatOpen] = useState(false);\r\n  const [chatInput, setChatInput] = useState('');\r\n  const [chatMessages, setChatMessages] = useState([\r\n    { sender: 'assistant', text: 'Hi! I am your Fibromyalgia Assistant. Ask me about your prediction or anything related.' }\r\n  ]);\r\n  const [chatLoading, setChatLoading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setResult(null);\r\n    setProbability(null);\r\n    setLoading(true);\r\n    setReport(null);\r\n    try {\r\n      // Convert fields to numbers\r\n      const inputData = {\r\n        age: parseFloat(form.age),\r\n        sex: parseInt(form.sex),\r\n        ses: parseFloat(form.ses),\r\n        csi: parseFloat(form.csi),\r\n        sps: parseFloat(form.sps),\r\n        sat: parseFloat(form.sat)\r\n      };\r\n      const token = localStorage.getItem('token');\r\n      const res = await predictFibromyalgia(inputData, token);\r\n      setResult(res.data.result);\r\n      setProbability(res.data.probability);\r\n      // Save inputData for report\r\n      setForm((prev) => ({ ...prev, ...inputData }));\r\n                // Debug: log inputData before report generation\r\n                console.log('Report inputData:', inputData);\r\n    } catch (err) {\r\n      setError(err.response?.data?.detail || 'Prediction failed.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Chatbot handlers\r\n  const handleChatOpen = () => setChatOpen(true);\r\n  const handleChatClose = () => setChatOpen(false);\r\n  const handleChatInput = (e) => setChatInput(e.target.value);\r\n  const handleChatSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!chatInput.trim()) return;\r\n    setChatMessages((msgs) => [...msgs, { sender: 'user', text: chatInput }]);\r\n    setChatLoading(true);\r\n    try {\r\n      const res = await sendChatbotMessage(\r\n        chatInput,\r\n        result,\r\n        probability\r\n      );\r\n      setChatMessages((msgs) => [\r\n        ...msgs,\r\n        { sender: 'assistant', text: res.data.response }\r\n      ]);\r\n    } catch {\r\n      setChatMessages((msgs) => [\r\n        ...msgs,\r\n        { sender: 'assistant', text: 'Sorry, there was a problem contacting the assistant.' }\r\n      ]);\r\n    } finally {\r\n      setChatLoading(false);\r\n      setChatInput('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"patient-dashboard-container\">\r\n      <div className=\"patient-dashboard-title\">Patient Dashboard</div>\r\n      <form className=\"patient-dashboard-form\" onSubmit={handleSubmit} autoComplete=\"off\">\r\n        <label>Age\r\n          <input type=\"number\" name=\"age\" value={form.age} onChange={handleChange} required min=\"0\" max=\"120\" placeholder=\"Enter your age\" />\r\n        </label>\r\n        <label>Sex (0=Female, 1=Male)\r\n          <input type=\"number\" name=\"sex\" value={form.sex} onChange={handleChange} required min=\"0\" max=\"1\" placeholder=\"0 for Female, 1 for Male\" />\r\n        </label>\r\n        <label>Socioeconomic Status (SES)\r\n          <input type=\"number\" name=\"ses\" value={form.ses} onChange={handleChange} required step=\"any\" placeholder=\"SES score\" />\r\n        </label>\r\n        <label>CSI Total Score\r\n          <input type=\"number\" name=\"csi\" value={form.csi} onChange={handleChange} required step=\"any\" placeholder=\"Central Sensitization Inventory\" />\r\n        </label>\r\n        <label>SPS Total Score\r\n          <input type=\"number\" name=\"sps\" value={form.sps} onChange={handleChange} required step=\"any\" placeholder=\"Sensory Perception Scale\" />\r\n        </label>\r\n        <label>SAT Total Score\r\n          <input type=\"number\" name=\"sat\" value={form.sat} onChange={handleChange} required step=\"any\" placeholder=\"Sleep Assessment Tool\" />\r\n        </label>\r\n        <button type=\"submit\" disabled={loading}>{loading ? 'Predicting...' : 'Predict Fibromyalgia Risk'}</button>\r\n      </form>\r\n      {error && <div className=\"patient-dashboard-error\">{error}</div>}\r\n      {result && (\r\n        <div className=\"patient-dashboard-result\">\r\n          <span className=\"risk\">\r\n            <i className={result.icon} style={{ fontSize: '1.5em', verticalAlign: 'middle', marginRight: '0.5em' }}></i>\r\n            {result.label}\r\n          </span>\r\n          <span className=\"probability\">Probability: {probability}%</span>\r\n          <button\r\n            className=\"patient-dashboard-report-btn\"\r\n            style={{ marginTop: '1.2em', padding: '0.7em 1.2em', fontSize: '1.05rem', borderRadius: '7px', background: '#4f8cff', color: '#fff', border: 'none', fontWeight: 600, cursor: 'pointer', boxShadow: '0 2px 8px rgba(44,62,80,0.08)' }}\r\n            disabled={reportLoading}\r\n            onClick={async () => {\r\n              setReportLoading(true);\r\n              setReport(null);\r\n              try {\r\n                const token = localStorage.getItem('token');\r\n                let full_name = window.localStorage.getItem('full_name') || '';\r\n                let email = window.localStorage.getItem('email') || '';\r\n                if (!full_name || !email) {\r\n                  const payload = parseJwt(token);\r\n                  if (!full_name && payload.full_name) full_name = payload.full_name;\r\n                  if (!email && payload.sub) email = payload.sub;\r\n                }\r\n                // Debug: log extracted values\r\n                console.log('Extracted full_name:', full_name, 'Extracted email:', email);\r\n                if (!full_name) full_name = '-';\r\n                const inputData = {\r\n                  age: parseFloat(form.age),\r\n                  sex: parseInt(form.sex),\r\n                  ses: parseFloat(form.ses),\r\n                  csi: parseFloat(form.csi),\r\n                  sps: parseFloat(form.sps),\r\n                  sat: parseFloat(form.sat),\r\n                  full_name,\r\n                  email\r\n                };\r\n                const res = await generateReport(inputData, result, probability, token);\r\n                setReport(res.data);\r\n              } catch {\r\n                setReport({ error: 'Failed to generate report.' });\r\n              } finally {\r\n                setReportLoading(false);\r\n              }\r\n            }}\r\n          >{reportLoading ? 'Generating Report...' : 'Generate Report'}</button>\r\n        </div>\r\n      )}\r\n      {report && !report.error && (\r\n        <div className=\"patient-dashboard-report\" style={{ marginTop: '2em', background: '#f8fafc', borderRadius: '12px', boxShadow: '0 2px 8px rgba(44,62,80,0.06)', padding: '1.5em 1.2em' }}>\r\n          <h3 style={{ color: '#2d3a4b', fontWeight: 700, marginBottom: '1em' }}>{report.title}</h3>\r\n          <ul style={{ listStyle: 'none', padding: 0 }}>\r\n            {Object.entries(report.fields).map(([key, value]) => (\r\n              <li key={key} style={{ marginBottom: '0.7em', fontSize: '1.08rem' }}><strong>{key}:</strong> {value}</li>\r\n            ))}\r\n          </ul>\r\n          <div style={{ marginTop: '1.2em', color: '#3a4a5d', fontSize: '1.05rem' }}>{report.summary}</div>\r\n          <button\r\n            className=\"patient-dashboard-report-btn\"\r\n            style={{ marginTop: '1.5em', padding: '0.7em 1.2em', fontSize: '1.05rem', borderRadius: '7px', background: '#38b6ff', color: '#fff', border: 'none', fontWeight: 600, cursor: 'pointer', boxShadow: '0 2px 8px rgba(44,62,80,0.08)' }}\r\n            onClick={async () => {\r\n              try {\r\n                const token = localStorage.getItem('token');\r\n                let full_name = window.localStorage.getItem('full_name') || '';\r\n                let email = window.localStorage.getItem('email') || '';\r\n                if (!full_name || !email) {\r\n                  const payload = parseJwt(token);\r\n                  if (!full_name && payload.full_name) full_name = payload.full_name;\r\n                  if (!email && payload.sub) email = payload.sub;\r\n                }\r\n                const inputData = {\r\n                  age: parseFloat(form.age),\r\n                  sex: parseInt(form.sex),\r\n                  ses: parseFloat(form.ses),\r\n                  csi: parseFloat(form.csi),\r\n                  sps: parseFloat(form.sps),\r\n                  sat: parseFloat(form.sat),\r\n                  result,\r\n                  probability,\r\n                  full_name,\r\n                  email\r\n                };\r\n                // Debug: log inputData before PDF download\r\n                console.log('PDF inputData:', inputData);\r\n                const res = await axios.post(\r\n                  (process.env.REACT_APP_BACKEND_URL || 'http://localhost:8000') + '/download_report',\r\n                  inputData,\r\n                  {\r\n                    headers: { 'Content-Type': 'application/json', ...(token && { Authorization: `Bearer ${token}` }) },\r\n                    responseType: 'blob'\r\n                  }\r\n                );\r\n                const url = window.URL.createObjectURL(new Blob([res.data], { type: 'application/pdf' }));\r\n                const link = document.createElement('a');\r\n                link.href = url;\r\n                link.setAttribute('download', 'Fibromyalgia_Report.pdf');\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                link.parentNode.removeChild(link);\r\n              } catch {\r\n                alert('Failed to download PDF report.');\r\n              }\r\n            }}\r\n          >Download PDF</button>\r\n        </div>\r\n      )}\r\n      {report && report.error && (\r\n        <div className=\"patient-dashboard-error\">{report.error}</div>\r\n      )}\r\n\r\n      {/* Chatbot Floating Button */}\r\n      <div\r\n        className=\"chatbot-fab\"\r\n        title=\"Chat with Fibromyalgia Assistant\"\r\n        onClick={handleChatOpen}\r\n        style={{ display: chatOpen ? 'none' : 'flex' }}\r\n      >ðŸ’¬</div>\r\n\r\n      {/* Chatbot Sidebar */}\r\n      <div className={`chatbot-sidebar${chatOpen ? '' : ' chatbot-closed'}`}>\r\n        <div className=\"chatbot-header\">\r\n          Fibromyalgia Assistant\r\n          <span className=\"chatbot-close\" title=\"Close\" onClick={handleChatClose}>Ã—</span>\r\n        </div>\r\n        <div className=\"chatbot-messages\" id=\"chatbot-messages\">\r\n          {chatMessages.map((msg, idx) => (\r\n            <div key={idx} className={msg.sender === 'user' ? 'chatbot-user' : 'chatbot-assistant'}>\r\n              {msg.text}\r\n            </div>\r\n          ))}\r\n          {chatLoading && <div className=\"chatbot-assistant\">...</div>}\r\n        </div>\r\n        <form className=\"chatbot-form\" onSubmit={handleChatSubmit} autoComplete=\"off\">\r\n          <input\r\n            type=\"text\"\r\n            value={chatInput}\r\n            onChange={handleChatInput}\r\n            placeholder=\"Ask about your result...\"\r\n            maxLength={200}\r\n            disabled={chatLoading}\r\n            className=\"chatbot-input\"\r\n          />\r\n          <button type=\"submit\" disabled={chatLoading || !chatInput.trim()}>Send</button>\r\n        </form>\r\n        <div className=\"chatbot-disclaimer\">\r\n          This information is for educational purposes only and does not replace professional medical advice.\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PatientDashboard;\r\n"],"mappings":";;AAAA;AACA,SAASA,QAAQA,CAAEC,KAAK,EAAE;EACxB,IAAI,CAACA,KAAK,EAAE,OAAO,CAAC,CAAC;EACrB,IAAI;IACF,MAAMC,SAAS,GAAGD,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACrC,MAAMC,MAAM,GAAGF,SAAS,CAACG,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;IAC9D,MAAMC,WAAW,GAAGC,kBAAkB,CAACC,IAAI,CAACJ,MAAM,CAAC,CAACD,KAAK,CAAC,EAAE,CAAC,CAACM,GAAG,CAAC,UAASC,CAAC,EAAE;MAC5E,OAAO,GAAG,GAAG,CAAC,IAAI,GAAGA,CAAC,CAACC,UAAU,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,EAAEC,KAAK,CAAC,CAAC,CAAC,CAAC;IAC9D,CAAC,CAAC,CAACC,IAAI,CAAC,EAAE,CAAC,CAAC;IACZ,OAAOC,IAAI,CAACC,KAAK,CAACV,WAAW,CAAC;EAChC,CAAC,CAAC,MAAM;IACN,OAAO,CAAC,CAAC;EACX;AACF;AAGA,OAAOW,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,mBAAmB,QAAQ,qBAAqB;AACzD,SAASC,cAAc,QAAQ,eAAe;AAC9C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,wBAAwB;AAC/B,OAAO,+BAA+B;AACtC,SAASC,kBAAkB,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpD,SAASC,gBAAgBA,CAAA,EAAG;EAAAC,EAAA;EAC1B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGV,QAAQ,CAAC;IAC/BW,GAAG,EAAE,EAAE;IACPC,GAAG,EAAE,EAAE;IACPC,GAAG,EAAE,EAAE;IACPC,GAAG,EAAE,EAAE;IACPC,GAAG,EAAE,EAAE;IACPC,GAAG,EAAE;EACP,CAAC,CAAC;EACF,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACmB,WAAW,EAAEC,cAAc,CAAC,GAAGpB,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACqB,KAAK,EAAEC,QAAQ,CAAC,GAAGtB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACuB,OAAO,EAAEC,UAAU,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACyB,MAAM,EAAEC,SAAS,CAAC,GAAG1B,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAAC2B,aAAa,EAAEC,gBAAgB,CAAC,GAAG5B,QAAQ,CAAC,KAAK,CAAC;EACzD;EACA,MAAM,CAAC6B,QAAQ,EAAEC,WAAW,CAAC,GAAG9B,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAAC+B,SAAS,EAAEC,YAAY,CAAC,GAAGhC,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACiC,YAAY,EAAEC,eAAe,CAAC,GAAGlC,QAAQ,CAAC,CAC/C;IAAEmC,MAAM,EAAE,WAAW;IAAEC,IAAI,EAAE;EAA0F,CAAC,CACzH,CAAC;EACF,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGtC,QAAQ,CAAC,KAAK,CAAC;EAErD,MAAMuC,YAAY,GAAIC,CAAC,IAAK;IAC1B9B,OAAO,CAAC;MAAE,GAAGD,IAAI;MAAE,CAAC+B,CAAC,CAACC,MAAM,CAACC,IAAI,GAAGF,CAAC,CAACC,MAAM,CAACE;IAAM,CAAC,CAAC;EACvD,CAAC;EAED,MAAMC,YAAY,GAAG,MAAOJ,CAAC,IAAK;IAChCA,CAAC,CAACK,cAAc,CAAC,CAAC;IAClBvB,QAAQ,CAAC,EAAE,CAAC;IACZJ,SAAS,CAAC,IAAI,CAAC;IACfE,cAAc,CAAC,IAAI,CAAC;IACpBI,UAAU,CAAC,IAAI,CAAC;IAChBE,SAAS,CAAC,IAAI,CAAC;IACf,IAAI;MACF;MACA,MAAMoB,SAAS,GAAG;QAChBnC,GAAG,EAAEoC,UAAU,CAACtC,IAAI,CAACE,GAAG,CAAC;QACzBC,GAAG,EAAEoC,QAAQ,CAACvC,IAAI,CAACG,GAAG,CAAC;QACvBC,GAAG,EAAEkC,UAAU,CAACtC,IAAI,CAACI,GAAG,CAAC;QACzBC,GAAG,EAAEiC,UAAU,CAACtC,IAAI,CAACK,GAAG,CAAC;QACzBC,GAAG,EAAEgC,UAAU,CAACtC,IAAI,CAACM,GAAG,CAAC;QACzBC,GAAG,EAAE+B,UAAU,CAACtC,IAAI,CAACO,GAAG;MAC1B,CAAC;MACD,MAAMjC,KAAK,GAAGkE,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAMC,GAAG,GAAG,MAAMlD,mBAAmB,CAAC6C,SAAS,EAAE/D,KAAK,CAAC;MACvDmC,SAAS,CAACiC,GAAG,CAACC,IAAI,CAACnC,MAAM,CAAC;MAC1BG,cAAc,CAAC+B,GAAG,CAACC,IAAI,CAACjC,WAAW,CAAC;MACpC;MACAT,OAAO,CAAE2C,IAAI,KAAM;QAAE,GAAGA,IAAI;QAAE,GAAGP;MAAU,CAAC,CAAC,CAAC;MACpC;MACAQ,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAET,SAAS,CAAC;IACvD,CAAC,CAAC,OAAOU,GAAG,EAAE;MAAA,IAAAC,aAAA,EAAAC,kBAAA;MACZpC,QAAQ,CAAC,EAAAmC,aAAA,GAAAD,GAAG,CAACG,QAAQ,cAAAF,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcL,IAAI,cAAAM,kBAAA,uBAAlBA,kBAAA,CAAoBE,MAAM,KAAI,oBAAoB,CAAC;IAC9D,CAAC,SAAS;MACRpC,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;EACA,MAAMqC,cAAc,GAAGA,CAAA,KAAM/B,WAAW,CAAC,IAAI,CAAC;EAC9C,MAAMgC,eAAe,GAAGA,CAAA,KAAMhC,WAAW,CAAC,KAAK,CAAC;EAChD,MAAMiC,eAAe,GAAIvB,CAAC,IAAKR,YAAY,CAACQ,CAAC,CAACC,MAAM,CAACE,KAAK,CAAC;EAC3D,MAAMqB,gBAAgB,GAAG,MAAOxB,CAAC,IAAK;IACpCA,CAAC,CAACK,cAAc,CAAC,CAAC;IAClB,IAAI,CAACd,SAAS,CAACkC,IAAI,CAAC,CAAC,EAAE;IACvB/B,eAAe,CAAEgC,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAE;MAAE/B,MAAM,EAAE,MAAM;MAAEC,IAAI,EAAEL;IAAU,CAAC,CAAC,CAAC;IACzEO,cAAc,CAAC,IAAI,CAAC;IACpB,IAAI;MACF,MAAMa,GAAG,GAAG,MAAM/C,kBAAkB,CAClC2B,SAAS,EACTd,MAAM,EACNE,WACF,CAAC;MACDe,eAAe,CAAEgC,IAAI,IAAK,CACxB,GAAGA,IAAI,EACP;QAAE/B,MAAM,EAAE,WAAW;QAAEC,IAAI,EAAEe,GAAG,CAACC,IAAI,CAACO;MAAS,CAAC,CACjD,CAAC;IACJ,CAAC,CAAC,MAAM;MACNzB,eAAe,CAAEgC,IAAI,IAAK,CACxB,GAAGA,IAAI,EACP;QAAE/B,MAAM,EAAE,WAAW;QAAEC,IAAI,EAAE;MAAuD,CAAC,CACtF,CAAC;IACJ,CAAC,SAAS;MACRE,cAAc,CAAC,KAAK,CAAC;MACrBN,YAAY,CAAC,EAAE,CAAC;IAClB;EACF,CAAC;EAED,oBACE1B,OAAA;IAAK6D,SAAS,EAAC,6BAA6B;IAAAC,QAAA,gBAC1C9D,OAAA;MAAK6D,SAAS,EAAC,yBAAyB;MAAAC,QAAA,EAAC;IAAiB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAChElE,OAAA;MAAM6D,SAAS,EAAC,wBAAwB;MAACM,QAAQ,EAAE7B,YAAa;MAAC8B,YAAY,EAAC,KAAK;MAAAN,QAAA,gBACjF9D,OAAA;QAAA8D,QAAA,GAAO,KACL,eAAA9D,OAAA;UAAOqE,IAAI,EAAC,QAAQ;UAACjC,IAAI,EAAC,KAAK;UAACC,KAAK,EAAElC,IAAI,CAACE,GAAI;UAACiE,QAAQ,EAAErC,YAAa;UAACsC,QAAQ;UAACC,GAAG,EAAC,GAAG;UAACC,GAAG,EAAC,KAAK;UAACC,WAAW,EAAC;QAAgB;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9H,CAAC,eACRlE,OAAA;QAAA8D,QAAA,GAAO,wBACL,eAAA9D,OAAA;UAAOqE,IAAI,EAAC,QAAQ;UAACjC,IAAI,EAAC,KAAK;UAACC,KAAK,EAAElC,IAAI,CAACG,GAAI;UAACgE,QAAQ,EAAErC,YAAa;UAACsC,QAAQ;UAACC,GAAG,EAAC,GAAG;UAACC,GAAG,EAAC,GAAG;UAACC,WAAW,EAAC;QAA0B;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtI,CAAC,eACRlE,OAAA;QAAA8D,QAAA,GAAO,4BACL,eAAA9D,OAAA;UAAOqE,IAAI,EAAC,QAAQ;UAACjC,IAAI,EAAC,KAAK;UAACC,KAAK,EAAElC,IAAI,CAACI,GAAI;UAAC+D,QAAQ,EAAErC,YAAa;UAACsC,QAAQ;UAACI,IAAI,EAAC,KAAK;UAACD,WAAW,EAAC;QAAW;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClH,CAAC,eACRlE,OAAA;QAAA8D,QAAA,GAAO,iBACL,eAAA9D,OAAA;UAAOqE,IAAI,EAAC,QAAQ;UAACjC,IAAI,EAAC,KAAK;UAACC,KAAK,EAAElC,IAAI,CAACK,GAAI;UAAC8D,QAAQ,EAAErC,YAAa;UAACsC,QAAQ;UAACI,IAAI,EAAC,KAAK;UAACD,WAAW,EAAC;QAAiC;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxI,CAAC,eACRlE,OAAA;QAAA8D,QAAA,GAAO,iBACL,eAAA9D,OAAA;UAAOqE,IAAI,EAAC,QAAQ;UAACjC,IAAI,EAAC,KAAK;UAACC,KAAK,EAAElC,IAAI,CAACM,GAAI;UAAC6D,QAAQ,EAAErC,YAAa;UAACsC,QAAQ;UAACI,IAAI,EAAC,KAAK;UAACD,WAAW,EAAC;QAA0B;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjI,CAAC,eACRlE,OAAA;QAAA8D,QAAA,GAAO,iBACL,eAAA9D,OAAA;UAAOqE,IAAI,EAAC,QAAQ;UAACjC,IAAI,EAAC,KAAK;UAACC,KAAK,EAAElC,IAAI,CAACO,GAAI;UAAC4D,QAAQ,EAAErC,YAAa;UAACsC,QAAQ;UAACI,IAAI,EAAC,KAAK;UAACD,WAAW,EAAC;QAAuB;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9H,CAAC,eACRlE,OAAA;QAAQqE,IAAI,EAAC,QAAQ;QAACO,QAAQ,EAAE3D,OAAQ;QAAA6C,QAAA,EAAE7C,OAAO,GAAG,eAAe,GAAG;MAA2B;QAAA8C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACvG,CAAC,EACNnD,KAAK,iBAAIf,OAAA;MAAK6D,SAAS,EAAC,yBAAyB;MAAAC,QAAA,EAAE/C;IAAK;MAAAgD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EAC/DvD,MAAM,iBACLX,OAAA;MAAK6D,SAAS,EAAC,0BAA0B;MAAAC,QAAA,gBACvC9D,OAAA;QAAM6D,SAAS,EAAC,MAAM;QAAAC,QAAA,gBACpB9D,OAAA;UAAG6D,SAAS,EAAElD,MAAM,CAACkE,IAAK;UAACC,KAAK,EAAE;YAAEC,QAAQ,EAAE,OAAO;YAAEC,aAAa,EAAE,QAAQ;YAAEC,WAAW,EAAE;UAAQ;QAAE;UAAAlB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EAC3GvD,MAAM,CAACuE,KAAK;MAAA;QAAAnB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACT,CAAC,eACPlE,OAAA;QAAM6D,SAAS,EAAC,aAAa;QAAAC,QAAA,GAAC,eAAa,EAACjD,WAAW,EAAC,GAAC;MAAA;QAAAkD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eAChElE,OAAA;QACE6D,SAAS,EAAC,8BAA8B;QACxCiB,KAAK,EAAE;UAAEK,SAAS,EAAE,OAAO;UAAEC,OAAO,EAAE,aAAa;UAAEL,QAAQ,EAAE,SAAS;UAAEM,YAAY,EAAE,KAAK;UAAEC,UAAU,EAAE,SAAS;UAAEC,KAAK,EAAE,MAAM;UAAEC,MAAM,EAAE,MAAM;UAAEC,UAAU,EAAE,GAAG;UAAEC,MAAM,EAAE,SAAS;UAAEC,SAAS,EAAE;QAAgC,CAAE;QACtOf,QAAQ,EAAEvD,aAAc;QACxBuE,OAAO,EAAE,MAAAA,CAAA,KAAY;UACnBtE,gBAAgB,CAAC,IAAI,CAAC;UACtBF,SAAS,CAAC,IAAI,CAAC;UACf,IAAI;YACF,MAAM3C,KAAK,GAAGkE,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;YAC3C,IAAIiD,SAAS,GAAGC,MAAM,CAACnD,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,IAAI,EAAE;YAC9D,IAAImD,KAAK,GAAGD,MAAM,CAACnD,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE;YACtD,IAAI,CAACiD,SAAS,IAAI,CAACE,KAAK,EAAE;cACxB,MAAMC,OAAO,GAAGxH,QAAQ,CAACC,KAAK,CAAC;cAC/B,IAAI,CAACoH,SAAS,IAAIG,OAAO,CAACH,SAAS,EAAEA,SAAS,GAAGG,OAAO,CAACH,SAAS;cAClE,IAAI,CAACE,KAAK,IAAIC,OAAO,CAACC,GAAG,EAAEF,KAAK,GAAGC,OAAO,CAACC,GAAG;YAChD;YACA;YACAjD,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAE4C,SAAS,EAAE,kBAAkB,EAAEE,KAAK,CAAC;YACzE,IAAI,CAACF,SAAS,EAAEA,SAAS,GAAG,GAAG;YAC/B,MAAMrD,SAAS,GAAG;cAChBnC,GAAG,EAAEoC,UAAU,CAACtC,IAAI,CAACE,GAAG,CAAC;cACzBC,GAAG,EAAEoC,QAAQ,CAACvC,IAAI,CAACG,GAAG,CAAC;cACvBC,GAAG,EAAEkC,UAAU,CAACtC,IAAI,CAACI,GAAG,CAAC;cACzBC,GAAG,EAAEiC,UAAU,CAACtC,IAAI,CAACK,GAAG,CAAC;cACzBC,GAAG,EAAEgC,UAAU,CAACtC,IAAI,CAACM,GAAG,CAAC;cACzBC,GAAG,EAAE+B,UAAU,CAACtC,IAAI,CAACO,GAAG,CAAC;cACzBmF,SAAS;cACTE;YACF,CAAC;YACD,MAAMlD,GAAG,GAAG,MAAMjD,cAAc,CAAC4C,SAAS,EAAE7B,MAAM,EAAEE,WAAW,EAAEpC,KAAK,CAAC;YACvE2C,SAAS,CAACyB,GAAG,CAACC,IAAI,CAAC;UACrB,CAAC,CAAC,MAAM;YACN1B,SAAS,CAAC;cAAEL,KAAK,EAAE;YAA6B,CAAC,CAAC;UACpD,CAAC,SAAS;YACRO,gBAAgB,CAAC,KAAK,CAAC;UACzB;QACF,CAAE;QAAAwC,QAAA,EACFzC,aAAa,GAAG,sBAAsB,GAAG;MAAiB;QAAA0C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAS,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnE,CACN,EACA/C,MAAM,IAAI,CAACA,MAAM,CAACJ,KAAK,iBACtBf,OAAA;MAAK6D,SAAS,EAAC,0BAA0B;MAACiB,KAAK,EAAE;QAAEK,SAAS,EAAE,KAAK;QAAEG,UAAU,EAAE,SAAS;QAAED,YAAY,EAAE,MAAM;QAAEM,SAAS,EAAE,+BAA+B;QAAEP,OAAO,EAAE;MAAc,CAAE;MAAAtB,QAAA,gBACrL9D,OAAA;QAAI8E,KAAK,EAAE;UAAES,KAAK,EAAE,SAAS;UAAEE,UAAU,EAAE,GAAG;UAAES,YAAY,EAAE;QAAM,CAAE;QAAApC,QAAA,EAAE3C,MAAM,CAACgF;MAAK;QAAApC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAC1FlE,OAAA;QAAI8E,KAAK,EAAE;UAAEsB,SAAS,EAAE,MAAM;UAAEhB,OAAO,EAAE;QAAE,CAAE;QAAAtB,QAAA,EAC1CuC,MAAM,CAACC,OAAO,CAACnF,MAAM,CAACoF,MAAM,CAAC,CAACtH,GAAG,CAAC,CAAC,CAACuH,GAAG,EAAEnE,KAAK,CAAC,kBAC9CrC,OAAA;UAAc8E,KAAK,EAAE;YAAEoB,YAAY,EAAE,OAAO;YAAEnB,QAAQ,EAAE;UAAU,CAAE;UAAAjB,QAAA,gBAAC9D,OAAA;YAAA8D,QAAA,GAAS0C,GAAG,EAAC,GAAC;UAAA;YAAAzC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,KAAC,EAAC7B,KAAK;QAAA,GAA1FmE,GAAG;UAAAzC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAA4F,CACzG;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC,eACLlE,OAAA;QAAK8E,KAAK,EAAE;UAAEK,SAAS,EAAE,OAAO;UAAEI,KAAK,EAAE,SAAS;UAAER,QAAQ,EAAE;QAAU,CAAE;QAAAjB,QAAA,EAAE3C,MAAM,CAACsF;MAAO;QAAA1C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACjGlE,OAAA;QACE6D,SAAS,EAAC,8BAA8B;QACxCiB,KAAK,EAAE;UAAEK,SAAS,EAAE,OAAO;UAAEC,OAAO,EAAE,aAAa;UAAEL,QAAQ,EAAE,SAAS;UAAEM,YAAY,EAAE,KAAK;UAAEC,UAAU,EAAE,SAAS;UAAEC,KAAK,EAAE,MAAM;UAAEC,MAAM,EAAE,MAAM;UAAEC,UAAU,EAAE,GAAG;UAAEC,MAAM,EAAE,SAAS;UAAEC,SAAS,EAAE;QAAgC,CAAE;QACtOC,OAAO,EAAE,MAAAA,CAAA,KAAY;UACnB,IAAI;YACF,MAAMnH,KAAK,GAAGkE,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;YAC3C,IAAIiD,SAAS,GAAGC,MAAM,CAACnD,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,IAAI,EAAE;YAC9D,IAAImD,KAAK,GAAGD,MAAM,CAACnD,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,EAAE;YACtD,IAAI,CAACiD,SAAS,IAAI,CAACE,KAAK,EAAE;cACxB,MAAMC,OAAO,GAAGxH,QAAQ,CAACC,KAAK,CAAC;cAC/B,IAAI,CAACoH,SAAS,IAAIG,OAAO,CAACH,SAAS,EAAEA,SAAS,GAAGG,OAAO,CAACH,SAAS;cAClE,IAAI,CAACE,KAAK,IAAIC,OAAO,CAACC,GAAG,EAAEF,KAAK,GAAGC,OAAO,CAACC,GAAG;YAChD;YACA,MAAMzD,SAAS,GAAG;cAChBnC,GAAG,EAAEoC,UAAU,CAACtC,IAAI,CAACE,GAAG,CAAC;cACzBC,GAAG,EAAEoC,QAAQ,CAACvC,IAAI,CAACG,GAAG,CAAC;cACvBC,GAAG,EAAEkC,UAAU,CAACtC,IAAI,CAACI,GAAG,CAAC;cACzBC,GAAG,EAAEiC,UAAU,CAACtC,IAAI,CAACK,GAAG,CAAC;cACzBC,GAAG,EAAEgC,UAAU,CAACtC,IAAI,CAACM,GAAG,CAAC;cACzBC,GAAG,EAAE+B,UAAU,CAACtC,IAAI,CAACO,GAAG,CAAC;cACzBC,MAAM;cACNE,WAAW;cACXgF,SAAS;cACTE;YACF,CAAC;YACD;YACA/C,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAET,SAAS,CAAC;YACxC,MAAMK,GAAG,GAAG,MAAMhD,KAAK,CAAC6G,IAAI,CAC1B,CAACC,OAAO,CAACC,GAAG,CAACC,qBAAqB,IAAI,uBAAuB,IAAI,kBAAkB,EACnFrE,SAAS,EACT;cACEsE,OAAO,EAAE;gBAAE,cAAc,EAAE,kBAAkB;gBAAE,IAAIrI,KAAK,IAAI;kBAAEsI,aAAa,EAAE,UAAUtI,KAAK;gBAAG,CAAC;cAAE,CAAC;cACnGuI,YAAY,EAAE;YAChB,CACF,CAAC;YACD,MAAMC,GAAG,GAAGnB,MAAM,CAACoB,GAAG,CAACC,eAAe,CAAC,IAAIC,IAAI,CAAC,CAACvE,GAAG,CAACC,IAAI,CAAC,EAAE;cAAEuB,IAAI,EAAE;YAAkB,CAAC,CAAC,CAAC;YACzF,MAAMgD,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;YACxCF,IAAI,CAACG,IAAI,GAAGP,GAAG;YACfI,IAAI,CAACI,YAAY,CAAC,UAAU,EAAE,yBAAyB,CAAC;YACxDH,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,IAAI,CAAC;YAC/BA,IAAI,CAACO,KAAK,CAAC,CAAC;YACZP,IAAI,CAACQ,UAAU,CAACC,WAAW,CAACT,IAAI,CAAC;UACnC,CAAC,CAAC,MAAM;YACNU,KAAK,CAAC,gCAAgC,CAAC;UACzC;QACF,CAAE;QAAAjE,QAAA,EACH;MAAY;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnB,CACN,EACA/C,MAAM,IAAIA,MAAM,CAACJ,KAAK,iBACrBf,OAAA;MAAK6D,SAAS,EAAC,yBAAyB;MAAAC,QAAA,EAAE3C,MAAM,CAACJ;IAAK;MAAAgD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAC7D,eAGDlE,OAAA;MACE6D,SAAS,EAAC,aAAa;MACvBsC,KAAK,EAAC,kCAAkC;MACxCP,OAAO,EAAErC,cAAe;MACxBuB,KAAK,EAAE;QAAEkD,OAAO,EAAEzG,QAAQ,GAAG,MAAM,GAAG;MAAO,CAAE;MAAAuC,QAAA,EAChD;IAAE;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,eAGTlE,OAAA;MAAK6D,SAAS,EAAE,kBAAkBtC,QAAQ,GAAG,EAAE,GAAG,iBAAiB,EAAG;MAAAuC,QAAA,gBACpE9D,OAAA;QAAK6D,SAAS,EAAC,gBAAgB;QAAAC,QAAA,GAAC,wBAE9B,eAAA9D,OAAA;UAAM6D,SAAS,EAAC,eAAe;UAACsC,KAAK,EAAC,OAAO;UAACP,OAAO,EAAEpC,eAAgB;UAAAM,QAAA,EAAC;QAAC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7E,CAAC,eACNlE,OAAA;QAAK6D,SAAS,EAAC,kBAAkB;QAACoE,EAAE,EAAC,kBAAkB;QAAAnE,QAAA,GACpDnC,YAAY,CAAC1C,GAAG,CAAC,CAACiJ,GAAG,EAAEC,GAAG,kBACzBnI,OAAA;UAAe6D,SAAS,EAAEqE,GAAG,CAACrG,MAAM,KAAK,MAAM,GAAG,cAAc,GAAG,mBAAoB;UAAAiC,QAAA,EACpFoE,GAAG,CAACpG;QAAI,GADDqG,GAAG;UAAApE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAER,CACN,CAAC,EACDnC,WAAW,iBAAI/B,OAAA;UAAK6D,SAAS,EAAC,mBAAmB;UAAAC,QAAA,EAAC;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzD,CAAC,eACNlE,OAAA;QAAM6D,SAAS,EAAC,cAAc;QAACM,QAAQ,EAAET,gBAAiB;QAACU,YAAY,EAAC,KAAK;QAAAN,QAAA,gBAC3E9D,OAAA;UACEqE,IAAI,EAAC,MAAM;UACXhC,KAAK,EAAEZ,SAAU;UACjB6C,QAAQ,EAAEb,eAAgB;UAC1BiB,WAAW,EAAC,0BAA0B;UACtC0D,SAAS,EAAE,GAAI;UACfxD,QAAQ,EAAE7C,WAAY;UACtB8B,SAAS,EAAC;QAAe;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC,eACFlE,OAAA;UAAQqE,IAAI,EAAC,QAAQ;UAACO,QAAQ,EAAE7C,WAAW,IAAI,CAACN,SAAS,CAACkC,IAAI,CAAC,CAAE;UAAAG,QAAA,EAAC;QAAI;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3E,CAAC,eACPlE,OAAA;QAAK6D,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAAC;MAEpC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAChE,EAAA,CAvQQD,gBAAgB;AAAAoI,EAAA,GAAhBpI,gBAAgB;AAyQzB,eAAeA,gBAAgB;AAAC,IAAAoI,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}